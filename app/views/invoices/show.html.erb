<%= render partial: "shared/header" %>

<h1 id="invoice-header-<%=@invoice.id%>">
  Invoice #<%= @invoice.id %></h1>

<div id="invoice-<%=@invoice.id%>">Status:
  <%= @invoice.status %><br>
  Created on:
  <%= @invoice.created_at.strftime('%A, %B %m, %Y') %><br>
  Total Revenue: $<%= @invoice.total_revenue %><br>
  Customer:<br>
  <%= @invoice.customer.first_name %>
  <%= @invoice.customer.last_name%>
</div>
-<br>

<h2>Items on this Invoice:</h2><br>
<% @invoice.invoice_items.each do |invoice_item| %>
  <div id="invoice-items-<%=invoice_item.id%>">
    Item Name:
    <%= invoice_item.item.name %><br>
    Item Quantity:
    <%= invoice_item.quantity %><br>
    Item Price:
    <%= invoice_item.item.unit_price %><br>
    Invoice Item Status:
    <%= invoice_item.status %><br>

    <%= form_with url: merchant_invoice_invoice_item_path(@merchant, invoice_item), method: :patch do |form| %>
    <%= form.label :status, "Status:" %>
    <%= form.select :status, options_for_select(["pending", "packaged", "shipped"], selected: "#{invoice_item.status}")%>
    <%= form.submit "Update Item Status" %>
  </div>
  <% end %>
<% end %>
